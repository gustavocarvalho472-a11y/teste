{"ast":null,"code":"import React,{useMemo}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend}from'chart.js';import{Line,Bar}from'react-chartjs-2';import{jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend);const MunicipalityTimeSeriesChart=_ref=>{let{municipalityName,data,chartType,comparisonYear,comparisonValue}=_ref;const chartData=useMemo(()=>{console.log('MunicipalityTimeSeriesChart - Comparison Year:',comparisonYear);console.log('MunicipalityTimeSeriesChart - Comparison Value:',comparisonValue);console.log('MunicipalityTimeSeriesChart - Data:',data);const datasets=[{label:'Executado',data:data.map(d=>d.executed),backgroundColor:'#9755fe',borderColor:'#9755fe',borderWidth:3,pointRadius:6,pointHoverRadius:8,tension:0.4},{label:'ReferÃªncia (OrÃ§amento Total)',data:data.map(d=>d.reference),backgroundColor:'#6b7280',borderColor:'#6b7280',borderWidth:3,borderDash:[5,5],pointRadius:6,pointHoverRadius:8,tension:0.4}];// Adicionar linha de comparaÃ§Ã£o com ano eleitoral se fornecido\nif(comparisonYear&&comparisonValue!==undefined&&comparisonValue>0){console.log('ADICIONANDO LINHA DE COMPARAÃ‡ÃƒO!');datasets.push({label:\"\\uD83D\\uDCCA \".concat(comparisonYear,\" (Ano Eleitoral)\"),data:data.map(()=>comparisonValue),backgroundColor:'#ef4444',borderColor:'#ef4444',borderWidth:3,borderDash:[10,5],pointRadius:0,pointHoverRadius:6,tension:0,fill:false});}return{labels:data.map(d=>d.year.toString()),datasets};},[data,comparisonYear,comparisonValue]);const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{font:{size:13,weight:'600'},padding:16,usePointStyle:true}},title:{display:true,text:\"S\\xE9rie Temporal: \".concat(municipalityName),font:{size:16,weight:'700'},color:'#2e3138',padding:{bottom:20}},tooltip:{callbacks:{label:function(context){const label=context.dataset.label||'';const value=context.parsed.y;const formatted=new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL',notation:'compact',maximumFractionDigits:1}).format(value);return\"\".concat(label,\": \").concat(formatted);}},backgroundColor:'#2e3138',padding:12,titleFont:{size:14,weight:'700'},bodyFont:{size:13}}},scales:{y:{beginAtZero:true,ticks:{callback:function(value){return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL',notation:'compact',maximumFractionDigits:0}).format(value);},font:{size:12},color:'#6b7280'},grid:{color:'#f5edff'}},x:{ticks:{font:{size:12},color:'#6b7280'},grid:{display:false}}}};const ChartComponent=chartType==='line'?Line:Bar;return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#ffffff',borderRadius:'12px',padding:'24px',boxShadow:'0 2px 8px rgba(0, 0, 0, 0.08)',border:'1px solid #f5edff',height:'400px'},children:/*#__PURE__*/_jsx(ChartComponent,{data:chartData,options:options})});};export default MunicipalityTimeSeriesChart;","map":{"version":3,"names":["React","useMemo","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","Line","Bar","jsx","_jsx","register","MunicipalityTimeSeriesChart","_ref","municipalityName","data","chartType","comparisonYear","comparisonValue","chartData","console","log","datasets","label","map","d","executed","backgroundColor","borderColor","borderWidth","pointRadius","pointHoverRadius","tension","reference","borderDash","undefined","push","concat","fill","labels","year","toString","options","responsive","maintainAspectRatio","plugins","legend","position","font","size","weight","padding","usePointStyle","title","display","text","color","bottom","tooltip","callbacks","context","dataset","value","parsed","y","formatted","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","titleFont","bodyFont","scales","beginAtZero","ticks","callback","grid","x","ChartComponent","borderRadius","boxShadow","border","height","children"],"sources":["/Users/gustavocarvalho/budget-dashboard/src/components/MunicipalityTimeSeriesChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartOptions\n} from 'chart.js';\nimport { Line, Bar } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface YearlyData {\n  year: number;\n  executed: number;\n  reference: number;\n  deviation: number;\n}\n\ninterface MunicipalityTimeSeriesChartProps {\n  municipalityName: string;\n  data: YearlyData[];\n  chartType: 'line' | 'bar';\n  comparisonYear?: number;\n  comparisonValue?: number;\n}\n\nconst MunicipalityTimeSeriesChart: React.FC<MunicipalityTimeSeriesChartProps> = ({\n  municipalityName,\n  data,\n  chartType,\n  comparisonYear,\n  comparisonValue\n}) => {\n  const chartData = useMemo(() => {\n    console.log('MunicipalityTimeSeriesChart - Comparison Year:', comparisonYear);\n    console.log('MunicipalityTimeSeriesChart - Comparison Value:', comparisonValue);\n    console.log('MunicipalityTimeSeriesChart - Data:', data);\n\n    const datasets: any[] = [\n      {\n        label: 'Executado',\n        data: data.map(d => d.executed),\n        backgroundColor: '#9755fe',\n        borderColor: '#9755fe',\n        borderWidth: 3,\n        pointRadius: 6,\n        pointHoverRadius: 8,\n        tension: 0.4\n      },\n      {\n        label: 'ReferÃªncia (OrÃ§amento Total)',\n        data: data.map(d => d.reference),\n        backgroundColor: '#6b7280',\n        borderColor: '#6b7280',\n        borderWidth: 3,\n        borderDash: [5, 5],\n        pointRadius: 6,\n        pointHoverRadius: 8,\n        tension: 0.4\n      }\n    ];\n\n    // Adicionar linha de comparaÃ§Ã£o com ano eleitoral se fornecido\n    if (comparisonYear && comparisonValue !== undefined && comparisonValue > 0) {\n      console.log('ADICIONANDO LINHA DE COMPARAÃ‡ÃƒO!');\n      datasets.push({\n        label: `ðŸ“Š ${comparisonYear} (Ano Eleitoral)`,\n        data: data.map(() => comparisonValue),\n        backgroundColor: '#ef4444',\n        borderColor: '#ef4444',\n        borderWidth: 3,\n        borderDash: [10, 5],\n        pointRadius: 0,\n        pointHoverRadius: 6,\n        tension: 0,\n        fill: false\n      });\n    }\n\n    return {\n      labels: data.map(d => d.year.toString()),\n      datasets\n    };\n  }, [data, comparisonYear, comparisonValue]);\n\n  const options: ChartOptions<'line' | 'bar'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n        labels: {\n          font: { size: 13, weight: '600' },\n          padding: 16,\n          usePointStyle: true\n        }\n      },\n      title: {\n        display: true,\n        text: `SÃ©rie Temporal: ${municipalityName}`,\n        font: { size: 16, weight: '700' },\n        color: '#2e3138',\n        padding: { bottom: 20 }\n      },\n      tooltip: {\n        callbacks: {\n          label: function(context: any) {\n            const label = context.dataset.label || '';\n            const value = context.parsed.y;\n            const formatted = new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 1\n            }).format(value);\n            return `${label}: ${formatted}`;\n          }\n        },\n        backgroundColor: '#2e3138',\n        padding: 12,\n        titleFont: { size: 14, weight: '700' },\n        bodyFont: { size: 13 }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          callback: function(value) {\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 0\n            }).format(value as number);\n          },\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { color: '#f5edff' }\n      },\n      x: {\n        ticks: {\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { display: false }\n      }\n    }\n  };\n\n  const ChartComponent = chartType === 'line' ? Line : Bar;\n\n  return (\n    <div style={{\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      padding: '24px',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n      border: '1px solid #f5edff',\n      height: '400px'\n    }}>\n      <ChartComponent data={chartData} options={options} />\n    </div>\n  );\n};\n\nexport default MunicipalityTimeSeriesChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}