{"ast":null,"code":"var _jsxFileName = \"/Users/gustavocarvalho/budget-dashboard/src/components/MunicipalityComparisonChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst MunicipalityComparisonChart = ({\n  municipalities,\n  metric\n}) => {\n  _s();\n  const chartData = useMemo(() => {\n    const sortedMunicipalities = [...municipalities].sort((a, b) => {\n      if (metric === 'executed') return b.executed - a.executed;\n      if (metric === 'deviation') return a.deviation - b.deviation;\n      return b.reference - b.executed - (a.reference - a.executed);\n    });\n    const topMunicipalities = sortedMunicipalities.slice(0, 10);\n    let values;\n    let label;\n    let colors;\n    if (metric === 'executed') {\n      values = topMunicipalities.map(m => m.executed);\n      label = 'Valor Executado';\n      colors = topMunicipalities.map(() => '#9755fe');\n    } else if (metric === 'deviation') {\n      values = topMunicipalities.map(m => m.deviation);\n      label = 'Desvio (%)';\n      colors = topMunicipalities.map(m => m.deviation < 0 ? '#10b981' : '#ef4444');\n    } else {\n      values = topMunicipalities.map(m => m.reference - m.executed);\n      label = 'Sobra Disponível';\n      colors = topMunicipalities.map(() => '#059669');\n    }\n    return {\n      labels: topMunicipalities.map(m => m.name),\n      datasets: [{\n        label,\n        data: values,\n        backgroundColor: colors,\n        borderRadius: 6,\n        borderWidth: 0\n      }]\n    };\n  }, [municipalities, metric]);\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    indexAxis: 'y',\n    plugins: {\n      legend: {\n        display: false\n      },\n      title: {\n        display: true,\n        text: `Comparação: Top 10 Municípios`,\n        font: {\n          size: 16,\n          weight: '700'\n        },\n        color: '#2e3138',\n        padding: {\n          bottom: 20\n        }\n      },\n      tooltip: {\n        callbacks: {\n          label: function (context) {\n            const value = context.parsed.x;\n            if (metric === 'deviation') {\n              return `Desvio: ${value.toFixed(1)}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 1\n            }).format(value);\n          }\n        },\n        backgroundColor: '#2e3138',\n        padding: 12,\n        titleFont: {\n          size: 14,\n          weight: '700'\n        },\n        bodyFont: {\n          size: 13\n        }\n      }\n    },\n    scales: {\n      x: {\n        beginAtZero: true,\n        ticks: {\n          callback: function (value) {\n            if (metric === 'deviation') {\n              return `${value}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 0\n            }).format(value);\n          },\n          font: {\n            size: 12\n          },\n          color: '#6b7280'\n        },\n        grid: {\n          color: '#f5edff'\n        }\n      },\n      y: {\n        ticks: {\n          font: {\n            size: 12\n          },\n          color: '#6b7280'\n        },\n        grid: {\n          display: false\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      padding: '24px',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n      border: '1px solid #f5edff',\n      height: '500px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Bar, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n_s(MunicipalityComparisonChart, \"i4eYYg6GOj65klTCDK4mhi4wfgw=\");\n_c = MunicipalityComparisonChart;\nexport default MunicipalityComparisonChart;\nvar _c;\n$RefreshReg$(_c, \"MunicipalityComparisonChart\");","map":{"version":3,"names":["React","useMemo","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Bar","jsxDEV","_jsxDEV","register","MunicipalityComparisonChart","municipalities","metric","_s","chartData","sortedMunicipalities","sort","a","b","executed","deviation","reference","topMunicipalities","slice","values","label","colors","map","m","labels","name","datasets","data","backgroundColor","borderRadius","borderWidth","options","responsive","maintainAspectRatio","indexAxis","plugins","legend","display","title","text","font","size","weight","color","padding","bottom","tooltip","callbacks","context","value","parsed","x","toFixed","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","titleFont","bodyFont","scales","beginAtZero","ticks","callback","grid","y","boxShadow","border","height","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gustavocarvalho/budget-dashboard/src/components/MunicipalityComparisonChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartOptions\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface MunicipalityComparison {\n  name: string;\n  executed: number;\n  reference: number;\n  deviation: number;\n  comparisonExecuted?: number; // Valor executado no período de comparação\n}\n\ninterface MunicipalityComparisonChartProps {\n  municipalities: MunicipalityComparison[];\n  metric: 'executed' | 'deviation' | 'extra';\n  currentPeriod?: number;\n  comparisonPeriod?: number;\n}\n\nconst MunicipalityComparisonChart: React.FC<MunicipalityComparisonChartProps> = ({\n  municipalities,\n  metric\n}) => {\n  const chartData = useMemo(() => {\n    const sortedMunicipalities = [...municipalities].sort((a, b) => {\n      if (metric === 'executed') return b.executed - a.executed;\n      if (metric === 'deviation') return a.deviation - b.deviation;\n      return (b.reference - b.executed) - (a.reference - a.executed);\n    });\n\n    const topMunicipalities = sortedMunicipalities.slice(0, 10);\n\n    let values: number[];\n    let label: string;\n    let colors: string[];\n\n    if (metric === 'executed') {\n      values = topMunicipalities.map(m => m.executed);\n      label = 'Valor Executado';\n      colors = topMunicipalities.map(() => '#9755fe');\n    } else if (metric === 'deviation') {\n      values = topMunicipalities.map(m => m.deviation);\n      label = 'Desvio (%)';\n      colors = topMunicipalities.map(m => m.deviation < 0 ? '#10b981' : '#ef4444');\n    } else {\n      values = topMunicipalities.map(m => m.reference - m.executed);\n      label = 'Sobra Disponível';\n      colors = topMunicipalities.map(() => '#059669');\n    }\n\n    return {\n      labels: topMunicipalities.map(m => m.name),\n      datasets: [{\n        label,\n        data: values,\n        backgroundColor: colors,\n        borderRadius: 6,\n        borderWidth: 0\n      }]\n    };\n  }, [municipalities, metric]);\n\n  const options: ChartOptions<'bar'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    indexAxis: 'y',\n    plugins: {\n      legend: {\n        display: false\n      },\n      title: {\n        display: true,\n        text: `Comparação: Top 10 Municípios`,\n        font: { size: 16, weight: '700' },\n        color: '#2e3138',\n        padding: { bottom: 20 }\n      },\n      tooltip: {\n        callbacks: {\n          label: function(context: any) {\n            const value = context.parsed.x;\n            if (metric === 'deviation') {\n              return `Desvio: ${value.toFixed(1)}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 1\n            }).format(value);\n          }\n        },\n        backgroundColor: '#2e3138',\n        padding: 12,\n        titleFont: { size: 14, weight: '700' },\n        bodyFont: { size: 13 }\n      }\n    },\n    scales: {\n      x: {\n        beginAtZero: true,\n        ticks: {\n          callback: function(value) {\n            if (metric === 'deviation') {\n              return `${value}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 0\n            }).format(value as number);\n          },\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { color: '#f5edff' }\n      },\n      y: {\n        ticks: {\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { display: false }\n      }\n    }\n  };\n\n  return (\n    <div style={{\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      padding: '24px',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n      border: '1px solid #f5edff',\n      height: '500px'\n    }}>\n      <Bar data={chartData} options={options} />\n    </div>\n  );\n};\n\nexport default MunicipalityComparisonChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}