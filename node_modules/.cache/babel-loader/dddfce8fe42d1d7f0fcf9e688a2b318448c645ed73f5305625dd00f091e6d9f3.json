{"ast":null,"code":"var _jsxFileName = \"/Users/gustavocarvalho/budget-dashboard/src/components/MunicipalityComparisonChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst MunicipalityComparisonChart = ({\n  municipalities,\n  metric,\n  currentPeriod,\n  comparisonPeriod\n}) => {\n  _s();\n  const chartData = useMemo(() => {\n    const sortedMunicipalities = [...municipalities].sort((a, b) => {\n      if (metric === 'executed') return b.executed - a.executed;\n      if (metric === 'deviation') return a.deviation - b.deviation;\n      return b.reference - b.executed - (a.reference - a.executed);\n    });\n    const topMunicipalities = sortedMunicipalities.slice(0, 10);\n    let currentValues;\n    let comparisonValues;\n    let currentLabel;\n    let comparisonLabel;\n    if (metric === 'executed') {\n      currentValues = topMunicipalities.map(m => m.executed);\n      comparisonValues = topMunicipalities.map(m => m.comparisonExecuted || 0);\n      currentLabel = `${currentPeriod || 'Atual'} - Executado`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Executado`;\n    } else if (metric === 'deviation') {\n      currentValues = topMunicipalities.map(m => m.deviation);\n      comparisonValues = topMunicipalities.map(m => m.comparisonExecuted ? (m.comparisonExecuted / m.reference - 1) * 100 : 0);\n      currentLabel = `${currentPeriod || 'Atual'} - Desvio %`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Desvio %`;\n    } else {\n      currentValues = topMunicipalities.map(m => m.reference - m.executed);\n      comparisonValues = topMunicipalities.map(m => m.comparisonExecuted ? m.reference - m.comparisonExecuted : 0);\n      currentLabel = `${currentPeriod || 'Atual'} - Sobra`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Sobra`;\n    }\n    const datasets = [{\n      label: currentLabel,\n      data: currentValues,\n      backgroundColor: '#10b981',\n      borderRadius: 6,\n      borderWidth: 0\n    }];\n\n    // Adicionar dataset de compara√ß√£o se houver dados\n    const hasComparisonData = comparisonValues.some(v => v > 0);\n    if (hasComparisonData && comparisonPeriod) {\n      datasets.push({\n        label: comparisonLabel,\n        data: comparisonValues,\n        backgroundColor: '#3b82f6',\n        borderRadius: 6,\n        borderWidth: 0\n      });\n    }\n    return {\n      labels: topMunicipalities.map(m => m.name),\n      datasets\n    };\n  }, [municipalities, metric, currentPeriod, comparisonPeriod]);\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    indexAxis: 'y',\n    plugins: {\n      legend: {\n        display: false\n      },\n      title: {\n        display: true,\n        text: `Compara√ß√£o: Top 10 Munic√≠pios`,\n        font: {\n          size: 16,\n          weight: '700'\n        },\n        color: '#2e3138',\n        padding: {\n          bottom: 20\n        }\n      },\n      tooltip: {\n        callbacks: {\n          label: function (context) {\n            const value = context.parsed.x;\n            if (metric === 'deviation') {\n              return `Desvio: ${value.toFixed(1)}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 1\n            }).format(value);\n          }\n        },\n        backgroundColor: '#2e3138',\n        padding: 12,\n        titleFont: {\n          size: 14,\n          weight: '700'\n        },\n        bodyFont: {\n          size: 13\n        }\n      }\n    },\n    scales: {\n      x: {\n        beginAtZero: true,\n        ticks: {\n          callback: function (value) {\n            if (metric === 'deviation') {\n              return `${value}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 0\n            }).format(value);\n          },\n          font: {\n            size: 12\n          },\n          color: '#6b7280'\n        },\n        grid: {\n          color: '#f5edff'\n        }\n      },\n      y: {\n        ticks: {\n          font: {\n            size: 12\n          },\n          color: '#6b7280'\n        },\n        grid: {\n          display: false\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      padding: '24px',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n      border: '1px solid #f5edff',\n      height: '500px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Bar, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n_s(MunicipalityComparisonChart, \"i4eYYg6GOj65klTCDK4mhi4wfgw=\");\n_c = MunicipalityComparisonChart;\nexport default MunicipalityComparisonChart;\nvar _c;\n$RefreshReg$(_c, \"MunicipalityComparisonChart\");","map":{"version":3,"names":["React","useMemo","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Bar","jsxDEV","_jsxDEV","register","MunicipalityComparisonChart","municipalities","metric","currentPeriod","comparisonPeriod","_s","chartData","sortedMunicipalities","sort","a","b","executed","deviation","reference","topMunicipalities","slice","currentValues","comparisonValues","currentLabel","comparisonLabel","map","m","comparisonExecuted","datasets","label","data","backgroundColor","borderRadius","borderWidth","hasComparisonData","some","v","push","labels","name","options","responsive","maintainAspectRatio","indexAxis","plugins","legend","display","title","text","font","size","weight","color","padding","bottom","tooltip","callbacks","context","value","parsed","x","toFixed","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","titleFont","bodyFont","scales","beginAtZero","ticks","callback","grid","y","boxShadow","border","height","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gustavocarvalho/budget-dashboard/src/components/MunicipalityComparisonChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartOptions\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface MunicipalityComparison {\n  name: string;\n  executed: number;\n  reference: number;\n  deviation: number;\n  comparisonExecuted?: number; // Valor executado no per√≠odo de compara√ß√£o\n}\n\ninterface MunicipalityComparisonChartProps {\n  municipalities: MunicipalityComparison[];\n  metric: 'executed' | 'deviation' | 'extra';\n  currentPeriod?: number;\n  comparisonPeriod?: number;\n}\n\nconst MunicipalityComparisonChart: React.FC<MunicipalityComparisonChartProps> = ({\n  municipalities,\n  metric,\n  currentPeriod,\n  comparisonPeriod\n}) => {\n  const chartData = useMemo(() => {\n    const sortedMunicipalities = [...municipalities].sort((a, b) => {\n      if (metric === 'executed') return b.executed - a.executed;\n      if (metric === 'deviation') return a.deviation - b.deviation;\n      return (b.reference - b.executed) - (a.reference - a.executed);\n    });\n\n    const topMunicipalities = sortedMunicipalities.slice(0, 10);\n\n    let currentValues: number[];\n    let comparisonValues: number[];\n    let currentLabel: string;\n    let comparisonLabel: string;\n\n    if (metric === 'executed') {\n      currentValues = topMunicipalities.map(m => m.executed);\n      comparisonValues = topMunicipalities.map(m => m.comparisonExecuted || 0);\n      currentLabel = `${currentPeriod || 'Atual'} - Executado`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Executado`;\n    } else if (metric === 'deviation') {\n      currentValues = topMunicipalities.map(m => m.deviation);\n      comparisonValues = topMunicipalities.map(m =>\n        m.comparisonExecuted ? ((m.comparisonExecuted / m.reference) - 1) * 100 : 0\n      );\n      currentLabel = `${currentPeriod || 'Atual'} - Desvio %`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Desvio %`;\n    } else {\n      currentValues = topMunicipalities.map(m => m.reference - m.executed);\n      comparisonValues = topMunicipalities.map(m =>\n        m.comparisonExecuted ? m.reference - m.comparisonExecuted : 0\n      );\n      currentLabel = `${currentPeriod || 'Atual'} - Sobra`;\n      comparisonLabel = `${comparisonPeriod || 'Compara√ß√£o'} üó≥Ô∏è - Sobra`;\n    }\n\n    const datasets: any[] = [\n      {\n        label: currentLabel,\n        data: currentValues,\n        backgroundColor: '#10b981',\n        borderRadius: 6,\n        borderWidth: 0\n      }\n    ];\n\n    // Adicionar dataset de compara√ß√£o se houver dados\n    const hasComparisonData = comparisonValues.some(v => v > 0);\n    if (hasComparisonData && comparisonPeriod) {\n      datasets.push({\n        label: comparisonLabel,\n        data: comparisonValues,\n        backgroundColor: '#3b82f6',\n        borderRadius: 6,\n        borderWidth: 0\n      });\n    }\n\n    return {\n      labels: topMunicipalities.map(m => m.name),\n      datasets\n    };\n  }, [municipalities, metric, currentPeriod, comparisonPeriod]);\n\n  const options: ChartOptions<'bar'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    indexAxis: 'y',\n    plugins: {\n      legend: {\n        display: false\n      },\n      title: {\n        display: true,\n        text: `Compara√ß√£o: Top 10 Munic√≠pios`,\n        font: { size: 16, weight: '700' },\n        color: '#2e3138',\n        padding: { bottom: 20 }\n      },\n      tooltip: {\n        callbacks: {\n          label: function(context: any) {\n            const value = context.parsed.x;\n            if (metric === 'deviation') {\n              return `Desvio: ${value.toFixed(1)}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 1\n            }).format(value);\n          }\n        },\n        backgroundColor: '#2e3138',\n        padding: 12,\n        titleFont: { size: 14, weight: '700' },\n        bodyFont: { size: 13 }\n      }\n    },\n    scales: {\n      x: {\n        beginAtZero: true,\n        ticks: {\n          callback: function(value) {\n            if (metric === 'deviation') {\n              return `${value}%`;\n            }\n            return new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL',\n              notation: 'compact',\n              maximumFractionDigits: 0\n            }).format(value as number);\n          },\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { color: '#f5edff' }\n      },\n      y: {\n        ticks: {\n          font: { size: 12 },\n          color: '#6b7280'\n        },\n        grid: { display: false }\n      }\n    }\n  };\n\n  return (\n    <div style={{\n      backgroundColor: '#ffffff',\n      borderRadius: '12px',\n      padding: '24px',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n      border: '1px solid #f5edff',\n      height: '500px'\n    }}>\n      <Bar data={chartData} options={options} />\n    </div>\n  );\n};\n\nexport default MunicipalityComparisonChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}